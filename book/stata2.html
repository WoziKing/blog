<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>2 数据文件与数据的管理 | STATA初步教程 | WoziKing的博客</title><meta name="description" content="WoziKing的博客">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.d93252a8.css">
    <link rel="modulepreload" href="/blog/assets/app.44fd0688.js"><link rel="modulepreload" href="/blog/assets/stata2.html.1fb0b1d6.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog/assets/stata2.html.1871e10c.js"><link rel="prefetch" href="/blog/assets/index.html.fa1c81e2.js"><link rel="prefetch" href="/blog/assets/index.html.21408885.js"><link rel="prefetch" href="/blog/assets/gametheory0.html.3d6ef201.js"><link rel="prefetch" href="/blog/assets/index.html.4c8df472.js"><link rel="prefetch" href="/blog/assets/stata0.html.ac2b3fec.js"><link rel="prefetch" href="/blog/assets/stata1.html.61a0a1d7.js"><link rel="prefetch" href="/blog/assets/stata3.html.3a7ab04f.js"><link rel="prefetch" href="/blog/assets/index.html.562f942c.js"><link rel="prefetch" href="/blog/assets/404.html.82bd4b1a.js"><link rel="prefetch" href="/blog/assets/index.html.2f713335.js"><link rel="prefetch" href="/blog/assets/index.html.1a811f74.js"><link rel="prefetch" href="/blog/assets/index.html.79fe6d6e.js"><link rel="prefetch" href="/blog/assets/index.html.dcd15e89.js"><link rel="prefetch" href="/blog/assets/index.html.e8952663.js"><link rel="prefetch" href="/blog/assets/index.html.5ad7ff00.js"><link rel="prefetch" href="/blog/assets/index.html.92637d35.js"><link rel="prefetch" href="/blog/assets/index.html.a203c300.js"><link rel="prefetch" href="/blog/assets/index.html.f1ebacfa.js"><link rel="prefetch" href="/blog/assets/index.html.912e8d35.js"><link rel="prefetch" href="/blog/assets/index.html.4e6742e9.js"><link rel="prefetch" href="/blog/assets/index.html.792102a7.js"><link rel="prefetch" href="/blog/assets/index.html.5cc39eee.js"><link rel="prefetch" href="/blog/assets/gametheory0.html.16e5e96c.js"><link rel="prefetch" href="/blog/assets/index.html.b4e77920.js"><link rel="prefetch" href="/blog/assets/stata0.html.c4838371.js"><link rel="prefetch" href="/blog/assets/stata1.html.dc395ff6.js"><link rel="prefetch" href="/blog/assets/stata3.html.0d5164b0.js"><link rel="prefetch" href="/blog/assets/index.html.c27c983e.js"><link rel="prefetch" href="/blog/assets/404.html.33c606b7.js"><link rel="prefetch" href="/blog/assets/index.html.8cfeed3f.js"><link rel="prefetch" href="/blog/assets/index.html.0d810b86.js"><link rel="prefetch" href="/blog/assets/index.html.a85fa18e.js"><link rel="prefetch" href="/blog/assets/index.html.ca2b6d05.js"><link rel="prefetch" href="/blog/assets/index.html.ab5ec2af.js"><link rel="prefetch" href="/blog/assets/index.html.c2dc5a75.js"><link rel="prefetch" href="/blog/assets/index.html.d1fbc681.js"><link rel="prefetch" href="/blog/assets/index.html.84659698.js"><link rel="prefetch" href="/blog/assets/index.html.d834f64d.js"><link rel="prefetch" href="/blog/assets/index.html.441e8d1e.js"><link rel="prefetch" href="/blog/assets/index.html.e8b88494.js"><link rel="prefetch" href="/blog/assets/404.e9c4ed9c.js"><link rel="prefetch" href="/blog/assets/Layout.879644d6.js"><link rel="prefetch" href="/blog/assets/Blog.8b36acfe.js"><link rel="prefetch" href="/blog/assets/photoswipe.esm.2debdee5.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/blog/" class="brand"><img class="logo" src="/blog/logo.ico" alt="WoziKing的博客"><!----><span class="site-name hide-in-pad">WoziKing的博客</span></a><!----></div><div class="navbar-center"><!----><!----></div><div class="navbar-right"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/project/" class="nav-link" aria-label="项目"><span class="icon iconfont icon-file" style=""></span>项目<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/book/" class="nav-link active" aria-label="学习笔记"><span class="icon iconfont icon-workingDirectory" style=""></span>学习笔记<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/articles/" class="nav-link" aria-label="文章"><span class="icon iconfont icon-article" style=""></span>文章<!----></a></div></nav><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">STATA初步教程</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/blog/book/stata0.html" class="nav-link sidebar-link sidebar-page" aria-label="0 写在前面"><!---->0 写在前面<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/book/stata1.html" class="nav-link sidebar-link sidebar-page" aria-label="1 STATA简介"><!---->1 STATA简介<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/book/stata2.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="2 数据文件与数据的管理"><!---->2 数据文件与数据的管理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-1-数据文件——读取保存、导入导出" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 数据文件——读取保存、导入导出"><!---->2.1 数据文件——读取保存、导入导出<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-1-1-读取与保存数据文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.1 读取与保存数据文件"><!---->2.1.1 读取与保存数据文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-1-2-导入与导出数据文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.2 导入与导出数据文件"><!---->2.1.2 导入与导出数据文件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-2-stata的处理对象——数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 Stata的处理对象——数据"><!---->2.2 Stata的处理对象——数据<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-2-1-变量及其属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.1 变量及其属性"><!---->2.2.1 变量及其属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-2-2-数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.2 数据类型"><!---->2.2.2 数据类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-2-2-数据格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.2 数据格式"><!---->2.2.2 数据格式<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-3-数据的管理——增、改、查、删" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 数据的管理——增、改、查、删"><!---->2.3 数据的管理——增、改、查、删<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-3-1-增加" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.1 增加"><!---->2.3.1 增加<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-3-2-更改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.2 更改"><!---->2.3.2 更改<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-3-3-查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.3 查询"><!---->2.3.3 查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-3-4-删除与只保留" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.4 删除与只保留"><!---->2.3.4 删除与只保留<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-4-label命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 label命令"><!---->2.4 label命令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-4-1-变量标签与数据标签" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4.1 变量标签与数据标签"><!---->2.4.1 变量标签与数据标签<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-4-2-值标签" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4.2 值标签"><!---->2.4.2 值标签<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-5-给数据分类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5 给数据分类"><!---->2.5 给数据分类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/book/stata2.html#_2-6-本章小结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6 本章小结"><!---->2.6 本章小结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/blog/book/stata3.html" class="nav-link sidebar-link sidebar-page" aria-label="3 描述性统计分析"><!---->3 描述性统计分析<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->2 数据文件与数据的管理 | STATA初步教程</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2021年11月11日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">WoziKing</span></span><span property="author" content="WoziKing"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2021年11月11日</span><meta property="datePublished" content="2021-11-11T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2021年11月11日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category4 clickable" role="navigation">教程</li><meta property="articleSection" content="教程"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2021年11月11日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag4 clickable" role="navigation">STATA</li></ul><meta property="keywords" content="STATA"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2021年11月11日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-1-数据文件——读取保存、导入导出" class="router-link-active router-link-exact-active toc-link level2">2.1 数据文件——读取保存、导入导出</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-1-1-读取与保存数据文件" class="router-link-active router-link-exact-active toc-link level3">2.1.1 读取与保存数据文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-1-2-导入与导出数据文件" class="router-link-active router-link-exact-active toc-link level3">2.1.2 导入与导出数据文件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-2-stata的处理对象——数据" class="router-link-active router-link-exact-active toc-link level2">2.2 Stata的处理对象——数据</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-2-1-变量及其属性" class="router-link-active router-link-exact-active toc-link level3">2.2.1 变量及其属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-2-2-数据类型" class="router-link-active router-link-exact-active toc-link level3">2.2.2 数据类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-2-2-数据格式" class="router-link-active router-link-exact-active toc-link level3">2.2.2 数据格式</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-3-数据的管理——增、改、查、删" class="router-link-active router-link-exact-active toc-link level2">2.3 数据的管理——增、改、查、删</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-3-1-增加" class="router-link-active router-link-exact-active toc-link level3">2.3.1 增加</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-3-2-更改" class="router-link-active router-link-exact-active toc-link level3">2.3.2 更改</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-3-3-查询" class="router-link-active router-link-exact-active toc-link level3">2.3.3 查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-3-4-删除与只保留" class="router-link-active router-link-exact-active toc-link level3">2.3.4 删除与只保留</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-4-label命令" class="router-link-active router-link-exact-active toc-link level2">2.4 label命令</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-4-1-变量标签与数据标签" class="router-link-active router-link-exact-active toc-link level3">2.4.1 变量标签与数据标签</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-4-2-值标签" class="router-link-active router-link-exact-active toc-link level3">2.4.2 值标签</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-5-给数据分类" class="router-link-active router-link-exact-active toc-link level2">2.5 给数据分类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/book/stata2.html#_2-6-本章小结" class="router-link-active router-link-exact-active toc-link level2">2.6 本章小结</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="_2-数据文件与数据的管理-stata初步教程" tabindex="-1"><a class="header-anchor" href="#_2-数据文件与数据的管理-stata初步教程" aria-hidden="true">#</a> 2 数据文件与数据的管理 | STATA初步教程</h1><h2 id="_2-1-数据文件——读取保存、导入导出" tabindex="-1"><a class="header-anchor" href="#_2-1-数据文件——读取保存、导入导出" aria-hidden="true">#</a> 2.1 数据文件——读取保存、导入导出</h2><p>  当我们想要回答某个问题的时候，比如写论文的时候<span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（从某种程度上来讲，论文就是在自问自答）</span>，需要有一定的数据作为支撑，这时候，我们会做大量的线上调研或者线下调研以获取数据。<br>   目前，多数使用的数据存储软件为Excel，虽然Excel同样也是一款数据存储、分析的软件，但其较强大的分析处理功能似乎被多数人忽略了<span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（这是事实，Excel成了单纯的存储工具）</span><span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（但就分析而言，stata或许比excel更好）</span>。<br>   好在，Stata支持多种数据文件的导入，比如Excel的文件、CSV文件等等，这就让我们处理数据更方便更便捷。<br>   由于本部分数据文件管理的操作都可以在“菜单栏”中的“文件”选项卡中完成图形化的操作，这种图形化操作更友好，所以推荐使用这种方法去读取、保存、导入或导出数据文件。下面的部分是这些图形化操作背后的命令。<br><img src="/blog/book/stata/stata2/stata2-2.1.1.png" style="width:50%;"></p><h3 id="_2-1-1-读取与保存数据文件" tabindex="-1"><a class="header-anchor" href="#_2-1-1-读取与保存数据文件" aria-hidden="true">#</a> 2.1.1 读取与保存数据文件</h3><p>  首先我们要知道，Stata数据文件的拓展名为<code>.dta</code>，比如说上一章节在demo中所使用的auto.dta文件。<br>   因此，读取保存操作指的是对拓展名为<code>.dta</code>的文件进行的读取保存。</p><div class="custom-container tip"><p class="custom-container-title">拓展名（扩展名、后缀名）</p><p>  文件扩展名也叫文件的后缀名，是操作系统用来标志文件类型的一种机制。<br>   一般一个扩展名是跟在主文件名后面的，由一个分隔符分隔。 比如，<code>QQ.exe</code>的文件名中，<code>QQ</code>是主文件名，<code>exe</code>是扩展名，表示这个文件是一个可执行程序。<br>   默认情况下文件的拓展名是被隐藏的，如果你想显示文件的拓展名，请查看<a href="https://jingyan.baidu.com/article/2fb0ba4076127741f2ec5ff0.html" target="_blank">这篇文章</a>。</p></div><h4 id="_2-1-1-1-读取数据文件——use命令" tabindex="-1"><a class="header-anchor" href="#_2-1-1-1-读取数据文件——use命令" aria-hidden="true">#</a> 2.1.1-1 读取数据文件——<code>use</code>命令</h4><p>  读取数据文件需要使用到<code>use</code>命令。</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>  如果是需要直接引用全部数据文件的话：<br><code>use filename [, clear nolabel]</code><br>   如果要引用该数据文件的部分内容：<br><code>use [var] [if] [in] using filename [,clear nolabel]</code></p><table><thead><tr style="background-color:#FFF;"><th>可选参数</th> <th>作用</th></tr></thead><tbody><tr style="background-color:#EFEFEF;"><td>nolabel</td> <td>清除数据中的变量的值的标签</td></tr><tr style="background-color:#FFF;"><td>clear</td> <td>清除程序已读数据</td></tr></tbody></table></div><div class="custom-container tip"><p class="custom-container-title">filename</p><p>  在这里的filename可以加上拓展名，如<code>use auto.dta</code>。<br>   由于Stata默认的数据文件拓展名为<code>.dta</code>，所以可以将上面的命令简写为<code>use auto</code>。<br>   此外，Stata默认工作目录路径是<code>c:\data\</code>，您可以在Stata窗口左下角来查看当前的工作目录路径。<br><img src="/blog/book/stata/stata2/stata2-2.1.2.png" style="width:50%;"></p><p>  同时，也可以加入这一文件的所在路径，如<code>use c:\data\auto.dta</code>。<br>   关于路径这方面的更多知识，您可以查看<a href="" target="_blank">这篇文章</a></p></div><p>  我们读取Stata的示例数据，使用到的命令如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>use auto
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在快捷栏中打开数据编辑器，我们就能看到<code>auto.dta</code>所储存的数据。<br><img src="/blog/book/stata/stata2/stata2-2.1.3.png" style="width:50%;"><br><img src="/blog/book/stata/stata2/stata2-2.1.4.png"></p><h4 id="_2-1-1-2-保存数据文件——save命令" tabindex="-1"><a class="header-anchor" href="#_2-1-1-2-保存数据文件——save命令" aria-hidden="true">#</a> 2.1.1-2 保存数据文件——<code>save</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>save [filename] [, save_options]</code></p></div><div class="custom-container tip"><p class="custom-container-title">保存与另存为</p><p>  如果你读取了某个dta文件：<br>   保存机制操作后，新文件会<b>覆盖掉</b>原先的文件。<br>   另存为机制操作后，会建立一个有保存数据的新文件，并不会覆盖掉原先的文件<b>（除非另存为的文件名与源文件名相同）</b>。<br>   无论是保存还是另存为，其文件都是Stata的数据文件，因此如果你想将Excel文件存为Stata数据文件，可以先进行导入，然后执行本命令。</p></div><h3 id="_2-1-2-导入与导出数据文件" tabindex="-1"><a class="header-anchor" href="#_2-1-2-导入与导出数据文件" aria-hidden="true">#</a> 2.1.2 导入与导出数据文件</h3><p>  如果我们需要将非Stata数据文件导入到Stata中，或者将Stata中的数据导出到其他后缀名的文件中，就将要用到导入与导出功能。考虑到目前主流使用的其他数据文件都是<code>.xls</code>或者<code>.xlsx</code>文件，也就是Excel文件，因此下文主要展示有关导入Excel文件使用的命令。<br>   再次提示，2.1部分都建议使用“菜单栏”的“文件”选项卡使用。</p><h4 id="_2-1-2-1-导入文件——import-excel命令" tabindex="-1"><a class="header-anchor" href="#_2-1-2-1-导入文件——import-excel命令" aria-hidden="true">#</a> 2.1.2-1 导入文件——<code>import excel</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>  导入整个excel文件：<br><code>import excel [using] filename [, import_excel_options]</code><br>   导入excel文件中的具体变量：<br><code>import excel extvarlist using filename [, import_excel_options]</code></p><table><thead><tr style="background-color:#FFF;"><th>import_excel_options</th> <th>描述</th></tr></thead><tbody><tr style="background-color:#EFEFEF;"><td>sheet(&quot;sheetname&quot;)</td> <td>选取工作簿</td></tr><tr style="background-color:#FFF;"><td>cellrange([start][:end])</td> <td>选取单元格</td></tr><tr style="background-color:#EFEFEF;"><td>firstrow</td> <td>将第一行视为变量名</td></tr></tbody></table></div><h4 id="_2-1-2-2-导出文件——export-excel命令" tabindex="-1"><a class="header-anchor" href="#_2-1-2-2-导出文件——export-excel命令" aria-hidden="true">#</a> 2.1.2-2 导出文件——<code>export excel</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>  导出整个excel文件：<br><code>export excel [using] filename [if] [in] [, export_excel_options]</code><br>   导出excel文件中的具体变量：<br><code>export excel [varlist] using filename [if] [in] [, export_excel_options]</code></p></div><div class="custom-container tip"><p class="custom-container-title">varname 和 varlist</p><p>varname指代是缓存中的某一变量的名称，varlist指代某些变量名称形成的一列。例如在<code>export excel</code>命令中，想导出缓存中的<em>var1</em>变量：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>export excel var1 using auto.xls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>若想同时导出<em>var1</em>和<em>var2</em>：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>export excel var1 var2 using auto.xls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也就是说，当某命令使用中只允许使用varname时，是不可以在该命令中写入多个变量的，即不可以写入varlist。而当某命令允许使用varlist时，是可以写入一个变量名的，即可以写入varname。</p></div><div class="custom-container tip"><p class="custom-container-title">import与export</p><p>  2.1.2仅是对excel文件的导入导出说明，其他文件，如<code>.txt</code>、<code>.csv</code>等，可以使用<code>import delimited</code>、<code>insheet</code>、<code>outfile</code>命令（前两个为导入，第三个为导出），其中<code>import</code>与<code>export</code>更像是一类命令，具体使用方法可以查看帮助文档：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>help import
help export
help insheet
help outfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_2-2-stata的处理对象——数据" tabindex="-1"><a class="header-anchor" href="#_2-2-stata的处理对象——数据" aria-hidden="true">#</a> 2.2 Stata的处理对象——数据</h2><p>  数据文件中所记载的就是Stata的处理对象。而毫无疑问，数据就是Stata的处理对象，对其处理方式无外乎就是增加、更改、查阅、删除。<br>   但在介绍具体的数据处理命令之前，我们还是先了解一下什么是变量，以及Stata中数据的类型与格式。</p><h3 id="_2-2-1-变量及其属性" tabindex="-1"><a class="header-anchor" href="#_2-2-1-变量及其属性" aria-hidden="true">#</a> 2.2.1 变量及其属性</h3><p>  变量可以理解为存储一类数据的“容器”，而这个“一类数据”怎么理解呢？<br>   举个例子，在我国14亿人口个人信息中，性别即是一类数据，那么在处理上，我们便可以将年龄“装”在一个叫<em>gender</em>的变量“容器”里，这样这个叫做<em>gender</em>的变量就装载着我国14亿人的性别。</p><p>  使用<code>auto.dta</code>，那么在数据编辑器中，我们可以看到，<br><img src="/blog/book/stata/stata2/stata2-2.2.1.png"><br>   数据编辑器中内置了数据表格<span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（很像Excel）</span>，数据表格显示出了<a id="name">变量名</a>，每一变量名下面的对应的一列单元格，都是该变量中的数据。例如，默认情况下<em>rep78</em>变量中的第5行数据（即<em>rep78[5]</em>）为4。<br>   数据编辑器右侧有变量窗口和属性窗口。</p><div class="custom-container warning"><p class="custom-container-title">变量的命名</p><p>  变量名由<b>英文字母</b>或<b>数字</b>或<b>其他符号</b>（如下划线_或短横线-）组成。<br>   强烈不建议以<b>数字</b>或_作为变量名的第一个字符；<br>   强烈不建议在变量名中使用<b>中文字符</b>；<br>   Stata区分大小写，即变量<em>var</em>与变量<em>VAR</em>是两个不同的变量。</p></div><p>  通过数据编辑器的变量窗口，我们可以看到每一个变量及其标签。<br><img src="/blog/book/stata/stata2/stata2-2.2.2.png" style="width:50%;"><br>   通过属性窗口，我们可以看到选中变量的变量名、标签、变量的数据类型、变量的数据格式、值标签、使用的数据文件名以及数据标签。<br><img src="/blog/book/stata/stata2/stata2-2.2.3.png" style="width:50%;"><br>   Stata中，变量的<a id="label">标签</a>（the label of a variate）相当于数据制作者对该变量的解释说明，即说明这个变量代表什么含义。用上面的年龄的例子来说，<em>gender</em>变量的标签就可以是<em>我国14亿人口性别</em>。<br>   所谓<a id="value_label">值标签</a>（the value label of a variate），其是指对<em>分类了的</em>数据值的描述，比如一些虚拟变量，通常用0表示一个意思，用1表示与之对立的意思。<br>   因此，还是拿上面14亿人口性别的例子为例，性别无非就是男与女，用虚拟变量可以表示1与0，所以可以对<em>gender</em>变量赋予值标签，即:</p><blockquote><p>0-&gt;Female<br> 1-&gt;Male</p></blockquote><p>  这就形成了一一对应的关系。<br>   用到值标签的变量，会在数据编辑器中显示其值标签，并用<span style="color:#0700C0;"> 蓝色 </span>显示，而点击具体某一数据时则会在数据编辑器的值的一栏中显示其原值。<br><img src="/blog/book/stata/stata2/stata2-2.2.4.png" style="width:100%;"></p><hr>   小结一下，变量的属性，请记住他们，这会对你对下文的理解有所帮助。 <table><tr><th colspan="2" style="text-align:center;">变量的属性</th></tr> <tr><th>属性</th><th>描述</th></tr> <tr><td><a href="#name">变量名</a></td><td>变量的名字</td></tr> <tr><td><a href="#label">标签</a></td><td>对变量作用的解释描述</td></tr> <tr><td><a href="#value_label">值标签</a></td><td>当变量所承载的数据是*分类了的*数据时，对*分类了的*数据的解释描述</td></tr> <tr><td><a href="#type">类型</a></td><td>变量所承载的数据的类型</td></tr> <tr><td><a href="#format">格式</a></td><td>变量所承载的数据的格式</td></tr></table><h3 id="_2-2-2-数据类型" tabindex="-1"><a class="header-anchor" href="#_2-2-2-数据类型" aria-hidden="true">#</a> 2.2.2 数据类型</h3><p>  Stata的<a id="type">数据类型</a><span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（由于数据是装载在变量里的，或者也可以说是变量类型）</span>分为三类，即数值型、字符型、日期型，大体上与主流编程语言的数据类型相同。其中，数值型变量又可下分为字节型、整型、长整型、浮点型和双精度型。<br>   因此，整个Stata的数据类型分类就如下表所示。</p><table><tr><th colspan="2" style="text-align:center;">数据类型</th> <th style="text-align:center;">最小值</th> <th style="text-align:center;">最大值</th> <th style="text-align:center;">有效数字</th></tr> <tr><td rowspan="5">数值型</td> <td>字节型(byte)</td> <td>-127</td> <td>100</td> <td>3位</td></tr> <tr><td>整型(int)</td> <td>-32767</td> <td>32740</td> <td>5位</td></tr> <tr><td>长整型(long)</td> <td>-2147483647</td> <td>2147483620</td> <td>10位</td></tr> <tr><td>浮点型(float)</td> <td>-1.70141173319*10<sup>38</sup></td> <td>1.70141173319*10<sup>36</sup></td> <td>8位</td></tr> <tr><td>双精度型(double)</td> <td>-8.9884656743*10<sup>307</sup></td> <td>8.9884656743*10<sup>308</sup></td> <td>16位</td></tr> <tr><td colspan="4">字符型(str#)</td> <td>#位(即取决于#的值)</td></tr> <tr><td colspan="4">日期型</td> <td></td></tr> <tr><td colspan="4">空值(用`.`表示)</td> <td></td></tr></table><div class="custom-container tip"><p class="custom-container-title">计算机学中的数据类型</p><p>  上述所说的数据类型是指其数据本身在计算机学中的类型，而按照统计学方法去分类，数据有像时间序列、截面、面板数据等</p></div><p>  当我们使用自带示例数据<code>auto.dta</code>时，打开数据编辑器，可以看到，数值型数据在单元格中是<span style="color:#000;"> 黑色 </span>的，而字符型数据在单元格中是<span style="color:#D02B2B;"> 红棕色 </span>的，至于<span style="color:#0700C0;"> 蓝色 </span>的部分，还记得吗？没错，反映的是值标签。 <img src="/blog/book/stata/stata2/stata2-2.1.4.png"></p><h3 id="_2-2-2-数据格式" tabindex="-1"><a class="header-anchor" href="#_2-2-2-数据格式" aria-hidden="true">#</a> 2.2.2 数据格式</h3><p>有三种数据类型而对应产生三类<a id="format">数据格式</a>。</p><h4 id="_2-2-2-1-stata的数值型数据格式" tabindex="-1"><a class="header-anchor" href="#_2-2-2-1-stata的数值型数据格式" aria-hidden="true">#</a> 2.2.2-1 stata的数值型数据格式</h4><div class="custom-container info"><p class="custom-container-title">数据格式</p><div style="text-align:center;"><p><code>%w.dgc</code></p></div></div><p>  在上面的格式中，<code>%</code>代表数据格式的开头，即表明设定格式，接着可以选择性输入负号<code>-</code>和数字<code>0</code>，负号表示数据靠左列式，输入的数字0则会保留在开头。<br>   字母<code>w</code>表示显示格式的宽度，然后还有一个小数点<code>.</code>，小数点后的<code>d</code>代表小数点后保留的小数位数。<br>   字母<code>g</code>表示通用设定格式，这个的字母<code>g</code>可以替换成<code>e</code>，表示使用科学计数法格式，或者替换成字母<code>f</code>，表示固定格式。<br>   字母<code>c</code>表示数字的每三位打一个英文逗号，常见的这种写法有货币数值，如$123,000<br>   因此，我们可以使用 <u>dis</u>play 命令对数据显示的格式进行查看。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dis %7.2f 1000.12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  输出结果是1000.12。</p><h4 id="_2-2-2-2-stata的字符型数据格式" tabindex="-1"><a class="header-anchor" href="#_2-2-2-2-stata的字符型数据格式" aria-hidden="true">#</a> 2.2.2-2 stata的字符型数据格式</h4><p>  与数值型数据格式相近，字符型数据格式如下：</p><div class="custom-container info"><p class="custom-container-title">数据格式</p><div style="text-align:center;"><p><code>%#s</code></p></div></div><p>  格式中的<code>#</code>是数字，表示最多可以写入#个字符。</p><details class="custom-container details"><summary>关于汉字问题</summary><p>  直接在编辑器中输入汉字时，一个汉字会占用3个字符，正常情况下，一个汉字占用2个字符，这是由于正常情况下是使用Unicode万国码对汉字进行编码的。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>clear
set obs 1
gen v1  = &quot;您好&quot;
gen lv1 = length(v1)
gen ulv1 = udstrlen(v1)
gen v2=substr(v1,1,3)
gen uv2=udsubstr(v1,1,2)
list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  上面的命令指生成一行数据（<code>set obs 1</code>），新建变量<em>v1</em>，数据是<em>&quot;您好&quot;</em>（<code>gen v1 = &quot;您好&quot;</code>），将<em>v1</em>的字符串长度赋值到变量<em>lv1</em>中（<code>gen lv1 = length(v1)</code>），且将其字符串长度以Unicode编码后赋值到变量<em>ulv1</em>中（<code>gen ulv1 = udstrlen(v1)</code>），最后三步为以直接和Unicode编码的方式将<em>v1</em>的第一个汉字赋值给变量<em>v2</em>、<em>uv2</em>，最后列出变量及数据。<br>   结果如下：<br><img src="/blog/book/stata/stata2/stata2-2.2.5.png"></p></details><h4 id="_2-2-2-3-stata的日期型数据格式" tabindex="-1"><a class="header-anchor" href="#_2-2-2-3-stata的日期型数据格式" aria-hidden="true">#</a> 2.2.2-3 stata的日期型数据格式</h4><table><thead><tr><th>格式</th> <th>描述</th></tr></thead> <tbody><tr><td>%tc</td> <td>毫秒</td></tr> <tr><td>%td</td> <td>日</td></tr> <tr><td>%tw</td> <td>周</td></tr> <tr><td>%tm</td> <td>月</td></tr> <tr><td>%tq</td> <td>季度</td></tr> <tr><td>%th</td> <td>半年</td></tr> <tr><td>%ty</td> <td>年</td></tr> <tr><td>%tg</td> <td>整数</td></tr></tbody></table>   更多有关日期型数据格式与取值的问题，可以查看<a href="https://blog.csdn.net/ustcjingshan/article/details/97128841" target="_blank">《stata：时间变量格式转换》</a>这篇文章。 <h2 id="_2-3-数据的管理——增、改、查、删" tabindex="-1"><a class="header-anchor" href="#_2-3-数据的管理——增、改、查、删" aria-hidden="true">#</a> 2.3 数据的管理——增、改、查、删</h2><h3 id="_2-3-1-增加" tabindex="-1"><a class="header-anchor" href="#_2-3-1-增加" aria-hidden="true">#</a> 2.3.1 增加</h3><p>  <code>generate</code>命令或<code>input</code>命令可以实现对数据的增加操作，让我们依次学习。</p><h4 id="_2-3-1-1-generate命令" tabindex="-1"><a class="header-anchor" href="#_2-3-1-1-generate命令" aria-hidden="true">#</a> 2.3.1-1 <code>generate</code>命令</h4><p>  这条命令个人习惯简写为<code>gen</code>，作用即<em>产生变量</em>，具体的使用方法如下：</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>generate [type] newvar[:lblname] =exp [if] [in] [, before(varname) | after(varname)]</code></p></div><div class="custom-container tip"><p class="custom-container-title">关于exp</p><p>exp为新变量生成的规则，数学表达式</p></div><p>  举个例子：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help generate
set obs 2
gen var1=10
gen var2=var1*10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  其中，<code>set obs 2</code>的含义为新增两行观测数据，对比这个命令使用前后状况便知其用。<br><img src="/blog/book/stata/stata2/stata2-2.3.1.png" style="width:70%;"><br>   最后结果如下：<br><img src="/blog/book/stata/stata2/stata2-2.3.2.png" style="width:70%;"></p><div class="custom-container tip"><p class="custom-container-title">观测数据</p><p>在数据编辑器中我们能够发现，一条观测数据指的是一横行的数据。</p></div><h4 id="_2-3-1-2-input命令" tabindex="-1"><a class="header-anchor" href="#_2-3-1-2-input命令" aria-hidden="true">#</a> 2.3.1-2 <code>input</code>命令</h4><p>  命令<code>input</code>的使用方法如下：</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>input [varlist] [, automatic label]</code></p></div><p>  使用<code>input</code>命令，首先需要声明向哪几个变量中增加新数据。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help input
input var1 var2 var3 str3 var4
1 2 3 &quot;a&quot;
1 4 9 &quot;b&quot;
1 8 27 &quot;c&quot;
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  上述命令即为向变量<em>var1</em>、<em>var2</em>、<em>var3</em>、<em>var4</em>中增加数据，向<em>var1</em>中增加1、1、1，向<em>var2</em>中增加2、4、8，向<em>var3</em>中增加3、9、27，向<em>var4</em>中增加a、b、c。</p><div class="custom-container tip"><p class="custom-container-title">输入原则</p><p>使用<code>input</code>命令，输入的目标变量要是之前不存在的新变量， 如果想输入<a href="#str">字符串</a>，需要在对应变量前声明数据类型（即str#）， 输入时字符用英文双引（&quot;&quot;）括入， 最后，别忘记输入end以结束输入。</p></div><p>  使用<code>input</code>命令适合小样本的录入，大样本数据可以尝试使用数据编辑器或直接导入文件。</p><h3 id="_2-3-2-更改" tabindex="-1"><a class="header-anchor" href="#_2-3-2-更改" aria-hidden="true">#</a> 2.3.2 更改</h3><div class="custom-container danger"><p class="custom-container-title">本部分警示</p><p>Stata可没有撤回功能，更改操作，尤其是更改值会将原数据覆盖掉，所以需要小心操作。 本部分的更改指的是在不新增变量的基础上的变动。在这一部分中，我们可以对变量的值进行更改，对变量的属性进行更改。</p></div><h4 id="_2-3-2-1-变量值的更改——replace命令" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-变量值的更改——replace命令" aria-hidden="true">#</a> 2.3.2-1 变量值的更改——<code>replace</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>replace oldvar=exp [if] [in] [, nopromote]</code></p></div><p>  接上一部分<code>generate</code>命令的代码演示，我们对<em>var2</em>的数据进行更改，将其值都改为10，那么这条命令即是：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help replace
replace var2=10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="/blog/book/stata/stata2/stata2-2.3.3.png" style="width:50%;"><p>  可以看到<em>var2</em>的所有数据都变成了10。当然，我们也可以指定某个观测数据的<em>var2</em>的值为什么，例如：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help replace
replace var2=500 if _n==2
* replace var2=500 in 2/2
*上下两个效果相同，第一个更直观一些
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/blog/book/stata/stata2/stata2-2.3.4.png" style="width:50%;"><p>  <em>var2</em>的第二个观测数据数值被改成了500。这里使用的<em>if子句</em>中的<em>_n</em>变量表示的是观测数据，其值是观测数据的数量；<em>in子句</em>中的<code>2/2</code>代表从第二行到第二行数据，也就是第二行数据。</p><h4 id="_2-3-2-2-变量名的更改——rename命令" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-变量名的更改——rename命令" aria-hidden="true">#</a> 2.3.2-2 变量名的更改——<code>rename</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>rename old_varname new_varname</code><br> 这里的旧变量名和新变量名可以是一个，也可以是多个，如果更改多个变量名，请用英文括号将该组变量括上。</p></div><p>  接上一部分<code>generate</code>命令的代码演示，更改<em>var1</em>和<em>var2</em>的变量名，变为<em>var11</em>和<em>var22</em></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help rename
rename (var1 var2) (var11 var22)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-3-数据类型的更改——recast命令" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-数据类型的更改——recast命令" aria-hidden="true">#</a> 2.3.2-3 数据类型的更改——<code>recast</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>recast type varlist [, force]</code></p></div><p>  接上一部分<code>generate</code>命令的代码演示，原本<em>var2</em>的数据类型为float，现在将其更改为double。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help recast
recast double var2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-4-变量数据格式的更改——format命令" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-变量数据格式的更改——format命令" aria-hidden="true">#</a> 2.3.2-4 变量数据格式的更改——<code>format</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>format %fmt varlist</code></p></div><p>  接上一部分<code>generate</code>命令的代码演示，原本<em>var2</em>的数据类型为%9.0g，现在将其更改为%-9.2fc。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help format
format %-9.2fc var2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-5-数据格式更改-字符型与数值型互换" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-数据格式更改-字符型与数值型互换" aria-hidden="true">#</a> 2.3.2-5 数据格式更改-字符型与数值型互换</h4><p>字符型数据——&gt;数值型数据</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>encode varname [if] [in], generate(newvar) [label (name) noextend]</code><br>   <em>转换后的数值型数据在数据编辑器中显示值标签内容</em></p><p><code>destring [varlist] , {generate(newvarlist)|replace} [destring_options]</code><br>   <em>转换后的数值型数据在数据编辑器中显示值的内容（需将非数字字符忽略掉）</em></p></div><p>数值型数据——&gt;字符型数据</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>decode varname [if] [in], generate(newvar) [maxlength(#)]</code><br>   <em>当该数值型数据有值标签时，转换后字符串为值标签内容</em></p><p><code>tostring varlist , {generate(newvarlist)|replace} [tostring_options]</code><br>   <em>当该数值型数据无值标签时，转换后字符串为值的内容</em></p></div><hr>   看到这里，是不是发现还有一个标签与值标签没有做？这是因为标签与值标签所用的命令<a href="#_2-4-label命令">（<code>label</code>命令）</a>很容易混淆，这个命令还很多，所以我们将会把它单独拿出来作为一个内容去分析。 <h3 id="_2-3-3-查询" tabindex="-1"><a class="header-anchor" href="#_2-3-3-查询" aria-hidden="true">#</a> 2.3.3 查询</h3><h4 id="_2-3-3-1-查询列表——list命令" tabindex="-1"><a class="header-anchor" href="#_2-3-3-1-查询列表——list命令" aria-hidden="true">#</a> 2.3.3-1 查询列表——<code>list</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>list [varlist] [if] [in] [, options]</code></p></div><p>  接<code>generate</code>命令的代码演示，展示<em>var2</em>的数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help list
list var2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-3-2-查询属性——describe命令" tabindex="-1"><a class="header-anchor" href="#_2-3-3-2-查询属性——describe命令" aria-hidden="true">#</a> 2.3.3-2 查询属性——<code>describe</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>当数据在内存中<br><code>describe [varlist], [simple/short]</code><br> 当数据在文件中<br><code>describe [varlist] using filename, [simple/short]</code></p></div><p>  接<code>generate</code>命令的代码演示，展示<em>var2</em>的属性：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help describe
describe var2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>  输出：<br><img src="/blog/book/stata/stata2/stata2-2.3.5.png" style="width:70%;"></p><p>  可以查阅到<em>var2</em>的变量名，且其数据类型为folat，数据格式为%9.0g，没有赋予值标签与标签。</p><h4 id="_2-3-3-3-排序——gsort命令" tabindex="-1"><a class="header-anchor" href="#_2-3-3-3-排序——gsort命令" aria-hidden="true">#</a> 2.3.3-3 排序——<code>gsort</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p><code>gsort [+|-] varname [[+|-] varname ...] [, generate(newvar) mfirst]</code></p></div><p>  当我们想将数据按照某个值以某种方式排列是，就可以使用<code>gsort</code>命令。<br>   在这里，我们引用auto.dta，将数据按照<em>price</em>倒序排列。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help gsort
use auto
gsort - price
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  排列前：<br><img src="/blog/book/stata/stata2/stata2-2.3.6.png" style="width:70%;"><br>   排列后：<br><img src="/blog/book/stata/stata2/stata2-2.3.7.png" style="width:70%;"></p><div class="custom-container tip"><p class="custom-container-title">gsort与sort</p><p><code>gsort</code>命令可以按照顺序（+）或者倒序（-）的方式排列，而<code>sort</code>命令似乎只能按照顺序进行排列。<br> 在这篇<a href="https://www.meiwen.com.cn/subject/jqeixhtx.html" target="_blank">文章</a>中，你能看到二者的区别，并且获取有关<code>gsort</code>的更多信息。</p></div><h3 id="_2-3-4-删除与只保留" tabindex="-1"><a class="header-anchor" href="#_2-3-4-删除与只保留" aria-hidden="true">#</a> 2.3.4 删除与只保留</h3><div class="custom-container danger"><p class="custom-container-title">本部分警示</p><p>Stata可没有撤回功能，所以想删除或只保留某些数据需要小心。</p></div><h4 id="_2-3-4-1-删除——drop命令" tabindex="-1"><a class="header-anchor" href="#_2-3-4-1-删除——drop命令" aria-hidden="true">#</a> 2.3.4-1 删除——<code>drop</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>删除变量：<br><code>drop varlist</code><br> 删除观测数据：<br><code>drop if exp</code><br> 删除某一范围的观测数据：<br><code>drop in range [if exp]</code></p></div><p>  例如我们想删除掉auto.dta中的<em>rep78</em>，然后倒序排序<em>price</em>后删除值为15906的<em>price</em>观测数据，最后再删除第2到第3行的观测数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* help drop
drop rep78
gsort - price
drop if price==15906
drop 2/3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-4-2-只保留——keep命令" tabindex="-1"><a class="header-anchor" href="#_2-3-4-2-只保留——keep命令" aria-hidden="true">#</a> 2.3.4-2 只保留——<code>keep</code>命令</h4><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>只保留变量： <code>keep varlist</code><br> 只保留观测数据： <code>keep if exp</code><br> 只保留某一范围的观测数据： <code>keep in range [if exp]</code></p></div><div class="custom-container tip"><p class="custom-container-title">互补</p><p><code>keep</code>与<code>drop</code>的命令使用非常相似：<br> 如果想只删除<em>var1</em>，那么<em>var1</em>消失，其他变量还存在，这是<code>drop</code>；<br> 如果只想保留<em>var1</em>，那么其他变量都消失，只有<em>var1</em>还存在，这是<code>keep</code>。<br> 上述命令分别是</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>drop var1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>与</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>keep var1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果按照上面的顺序执行，那么当执行到<code>keep var1</code>时会提示<em>var1</em>不存在（<span style="color:red;">variable var1 not found</span>），因为它已经被删了。</p></div><h2 id="_2-4-label命令" tabindex="-1"><a class="header-anchor" href="#_2-4-label命令" aria-hidden="true">#</a> 2.4 <code>label</code>命令</h2><p>  命令集<code>label</code>下的命令很多，包括了对数据标签、变量标签、变量值标签的增加、删除、定义等操作，因此我们单独拿出这一部分来讲解这个命令集。下面就让我们来粗略看一看一些重要的命令。</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>该命令的帮助文档：<br><code>help label</code><br> 给数据加标签：<br><code>label data [&quot;label&quot;]</code><br> 给变量加标签：<br><code>label variable varname [&quot;label&quot;]</code><br> 定义值标签：<br><code>label define lblname # &quot;label&quot; [# &quot;label&quot; ...] [, add modify replace nofix]</code><br> 将值标签赋给变量：<br><code>label values varlist [lblname|.] [, nofix]</code><br> 列出值标签的名称和内容：<br><code>label list [lblname [lblname ...]]</code><br> 删除值标签：<br><code>label drop {lblname [lblname ...] | _all}</code></p></div><h3 id="_2-4-1-变量标签与数据标签" tabindex="-1"><a class="header-anchor" href="#_2-4-1-变量标签与数据标签" aria-hidden="true">#</a> 2.4.1 变量标签与数据标签</h3><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>给变量加标签：<br><code>label variable varname [&quot;label&quot;]</code><br> 给数据加标签：<br><code>label data [&quot;label&quot;]</code></p></div><p>  举个例子，这例子在后文会被引用。例如，我们新建两个变量<em>age</em>、<em>sex</em>，有十个观测数据：{15,1}、{8,0}、{2,0}、{25,1}、{27,1}、{28,0}、{缺失,0}、{21,1}、{11,0}、{19,1}，那么我们该怎么将这些数据增加进内存中呢？</p><details class="custom-container details"><summary>答案</summary><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>input age sex
15 1
8 0
2 0
25 1
27 1
28 0
. 0
21 1
11 0
19 1
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缺失值的方法处理可以用异常数据，如：<code>99999</code>、<code>00000</code>等，或者直接记为空值<code>.</code><br> 除了这些，剩下的<br> 你猜对了吗？</p></details><p>  变量<em>age</em>代表年龄，变量<em>sex</em>代表性别，其中<em>1</em>为男性，<em>0</em>为女性。<br>   那么现在，我们就来给两个变量加上标签！</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label var age &quot;年龄&quot;
label var sex &quot;性别：1为男0为女&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="/blog/book/stata/stata2/stata2-2.4.1.png" style="width:50%;"><p>  如果我们想清空这个变量的标签，那么让他放空就好了。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label var age &quot;&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="/blog/book/stata/stata2/stata2-2.4.2.png" style="width:50%;"><div class="custom-container tip"><p class="custom-container-title">字符串</p><p>  <span id="str">字符串</span>或串(String)是由数字、字母、下划线组成的一串字符，在编程语言中，字符串多数使用英文单引<code>&#39;&#39;</code>或英文双引<code>&quot;&quot;</code>来规范。</p><p>  比如：<br>   <code>0</code>这是数值，其<a href="#type">数据类型</a>可以是int、或者float等；<br>   <code>&quot;0&quot;</code>这是字符串。</p><p>  在stata中只认为英文双引号下的为字符串，而英文单引使用则会显示错误。<br>   单独输入<code>&quot;&quot;</code>，形成空字符串，即字符量为0，这也就是为什么<code>label var age &quot;&quot;</code>这样可以清空标签，输入<code>&quot; &quot;</code>里面加入空格的，都不叫清空。</p><p>  相同的知识，我们还在<code>input</code>的输入原则中遇到过<a href="#input_yuanze">(Click Me)</a>。数据标签的处理，与变量标签的处理相同，只不过使用的具体命令不同罢了，在这里便不做赘述。</p></div><h3 id="_2-4-2-值标签" tabindex="-1"><a class="header-anchor" href="#_2-4-2-值标签" aria-hidden="true">#</a> 2.4.2 值标签</h3><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>定义值标签<br><code>label define lblname # &quot;label&quot; [# &quot;label&quot; ...] [, add modify replace nofix]</code><br> 将值标签赋给变量：<br><code>label values varlist [lblname|.] [, nofix]</code><br> 列出值标签的名称和内容：<br><code>label list [lblname [lblname ...]]</code><br> 删除值标签：<br><code>label drop {lblname [lblname ...] | _all}</code></p></div><p>  值标签是对已经<em>分类了的</em>数据进行描述标记，接2.4.1的年龄与性别的例子，在这个例子里，性别已经被大自然做好和分类<span onmouseover="this.style.background=&#39;#EEE&#39;" onmouseout="this.style.background=&#39;#000&#39;" title="你知道的太多了" style="background:#000;color:#000;">（当然也不乏有人想突破大自然的束缚）</span>，因此，我们可以为性别定义一个值标签：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label define sex_ValueLabel 0 &quot;女性&quot; 1 &quot;男性&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  这时我们可以将值标签列出显示出来，包括其内容。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="/blog/book/stata/stata2/stata2-2.4.3.png" style="width:50%;"><p>  然后将这个值标签<em>sex_ValueLabel</em>赋给变量<em>sex</em>。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label values sex sex_ValueLabel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  更改成功<br><img src="/blog/book/stata/stata2/stata2-2.4.5.png" style="width:70%;"><br><img src="/blog/book/stata/stata2/stata2-2.4.4.png" style="width:100%;"><br>   如果想将<em>sex</em>的值标签清空：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label values sex .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  最后，如果我们想要删除<em>sex_ValueLabel</em>这个值标签：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>label drop sex_ValueLabel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-5-给数据分类" tabindex="-1"><a class="header-anchor" href="#_2-5-给数据分类" aria-hidden="true">#</a> 2.5 给数据分类</h2><p>  当遇到不是那些已经<em>分类了的</em>数据的时候，比如年龄性别的例子中的<em>年龄</em>，我们需要对这些数据按照一定的标准人为分类，这就需要使用到<code>recode</code>命令。</p><div class="custom-container info"><p class="custom-container-title">命令使用</p><p>基本使用：<br><code>recode varlist (rule) [(rule) ...] [, generate(newvar)]</code><br> 帮助文档：<br><code>help recode</code></p><table><thead><tr style="background-color:#FFF;"><th>规则(rule)</th> <th>示例</th> <th>含义</th></tr></thead> <tbody><tr style="background-color:#F3F3F3;"><td># = #</td> <td>3 = 1</td> <td>原始数据中的3重新记为1</td></tr> <tr style="background-color:#FFF;"><td># # = #</td> <td>2 . = 9</td> <td>原始数据中的2和空值记为9</td></tr> <tr style="background-color:#F3F3F3;"><td>#/# = #</td> <td>1/5 = 4</td> <td>原始数据中1到5的值记为8</td></tr> <tr style="background-color:#FFF;"><td>nomissing = #</td> <td>nonmiss = 8</td> <td>原始数据中非缺失值（空值）记为8</td></tr> <tr style="background-color:#F3F3F3;"><td>missing = #</td> <td>miss = 9</td> <td>原始数据中缺失值（空值）记为9</td></tr></tbody></table></div><p>  继续使用上面年龄性别的例子，我们对年龄数据进行分类，分类的规则如下：</p><blockquote><p>0到10岁  1  值标签为“0到10岁”<br> 11到20岁  2  值标签为“11到20岁”<br> 21到30岁  3  值标签为“21到30岁”<br> 空值   0  值标签为“缺失”</p></blockquote><p>  那么这一操作用<code>recode</code>命令执行如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>recode age (0/10=1 &quot;0到10岁&quot;) (11/20=2 &quot;11到20岁&quot;) (21/30=3 &quot;21到30岁&quot;) (miss=0 &quot;缺失&quot;) ,gen(age1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  完成后提示（10 differences between age and age1），打开数据编辑器查看更改结果：<br><img src="/blog/book/stata/stata2/stata2-2.4.6.png" style="width:100%;"><br>   如果有值标签被定义时，是不允许覆盖原变量的，这时我们可以新建一个变量<em>age1</em>来储存上面的分类规则结果。</p><div class="custom-container danger"><p class="custom-container-title">如果没有值标签的话……</p><p>如果没有值标签，即这一条命令是这样的：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>recode age (0/10=1) (11/20=2) (21/30=3) (miss=0)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>那么，原始数据将会被覆盖掉。<br> 所以根据需求，如果要有覆盖操作的话，请及时对原始数据备份，毕竟数据无价……</p></div><h2 id="_2-6-本章小结" tabindex="-1"><a class="header-anchor" href="#_2-6-本章小结" aria-hidden="true">#</a> 2.6 本章小结</h2><p>  本章主要讲述了数据文件与数据的处理，涉及到了变量及其属性的知识以及众多操作命令，在这里给大家小计一下：</p><table><tr><th colspan="2" style="text-align:center;">变量的属性</th></tr> <tr><th>属性</th><th>描述</th></tr> <tr><td><a href="#name">变量名</a></td><td>变量的名字</td></tr> <tr><td><a href="#label">标签</a></td><td>对变量作用的解释描述</td></tr> <tr><td><a href="#value_label">值标签</a></td><td>当变量所承载的数据是<em>分类了的</em>数据时，对<em>分类了的</em>数据的解释描述</td></tr> <tr><td><a href="#type">类型</a></td><td>变量所承载的数据的类型</td></tr> <tr><td><a href="#format">格式</a></td><td>变量所承载的数据的格式</td></tr></table> <table><tr><th colspan="2" style="text-align:center;">数据类型</th> <th style="text-align:center;">最小值</th> <th style="text-align:center;">最大值</th> <th style="text-align:center;">有效数字</th></tr> <tr><td rowspan="5">数值型</td> <td>字节型(byte)</td> <td>-127</td> <td>100</td> <td>3位</td></tr> <tr><td>整型(int)</td> <td>-32767</td> <td>32740</td> <td>5位</td></tr> <tr><td>长整型(long)</td> <td>-2147483647</td> <td>2147483620</td> <td>10位</td></tr> <tr><td>浮点型(float)</td> <td>-1.70141173319*10<sup>38</sup></td> <td>1.70141173319*10<sup>36</sup></td> <td>8位</td></tr> <tr><td>双精度型(double)</td> <td>-8.9884656743*10<sup>307</sup></td> <td>8.9884656743*10<sup>308</sup></td> <td>16位</td></tr> <tr><td colspan="4">字符型(str#)</td> <td>#位(即取决于#的值)</td></tr> <tr><td colspan="4">日期型</td> <td></td></tr> <tr><td colspan="4">空值(用<code>.</code>表示)</td> <td></td></tr></table><div class="custom-container info"><p class="custom-container-title">本章命令</p><p>读取整个数据文件：<br>   <code>use filename [, clear nolabel]</code><br> 保存数据文件：<br>   <code>save [filename] [, save_options]</code><br> 导入整个Excel文件：<br>   <code>import excel [using] filename [, import_excel_options]</code><br> 导出整个Excel文件：<br>   <code>export excel [using] filename [if] [in] [, export_excel_options]</code><br><br><hr><br> 生成变量：<br>   <code>generate [type] newvar[:lblname] =exp [if] [in] [, before(varname) | after(varname)]</code><br> 输入数据：<br>   <code>input [varlist] [, automatic label]</code><br><br><hr><br> 更改变量值：<br>   <code>replace oldvar=exp [if] [in] [, nopromote]</code><br> 更改变量名：<br>   <code>rename old_varname new_varname</code><br> 更改数据类型：<br>   <code>recast type varlist [, force]</code><br> 更改数据格式：<br>   <code>format varlist %fmt</code><br> 字符型数据转数值型数据：<br>   <code>encode varname [if] [in], generate(newvar) [label (name) noextend]</code><br>   <code>destring [varlist] , {generate(newvarlist)|replace} [destring_options]</code><br> 数值型数据转字符型数据：<br>   <code>decode varname [if] [in], generate(newvar) [maxlength(#)]</code><br>   <code>tostring varlist , {generate(newvarlist)|replace} [tostring_options]</code><br><br><hr><br> 列表查询：<br>   <code>list [varlist] [if] [in] [, options]</code><br> 属性查询：<br>   <code>describe [varlist], [simple/short]</code><br> 排序：<br>   <code>gsort [+|-] varname [[+|-] varname ...] [, generate(newvar) mfirst]</code><br><br><hr><br> 删除或只保留变量:<br>   <code>drop varlist</code><br>   <code>keep varlist</code><br> 删除或只保留观测数据:<br>   <code>drop if exp</code><br>   <code>keep if exp</code><br><br><hr><br> 给数据加标签:<br>   <code>label data [&quot;label&quot;]</code><br> 给变量加标签：<br>   <code>label variable varname [&quot;label&quot;]</code><br> 定义值标签：<br>   <code>label define lblname # &quot;label&quot; [# &quot;label&quot; ...] [, add modify replace nofix]</code><br> 将值标签赋给变量：<br>   <code>label values varlist [lblname|.] [, nofix]</code><br> 列出值标签的名称和内容：<br>   <code>label list [lblname [lblname ...]]</code><br> 删除值标签：<br>   <code>label drop {lblname [lblname ...] | _all}</code><br><br><hr><br> 给数据人为分类：<br>   <code>recode varlist (rule) [(rule) ...] [, generate(newvar)]</code></p></div><p>  当我们对数据进行适当处理过后，就可以对数据进行分析了，下一章，我们会学习对已有数据进行简单的描述性统计分析，显示出数据所具有的独特特征。</p></div><!----><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><a href="/blog/book/stata1.html" class="nav-link prev" aria-label="1 STATA简介 | STATA初步教程"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->1 STATA简介 | STATA初步教程</div></a><a href="/blog/book/stata3.html" class="nav-link next" aria-label="3 描述性统计分析 | STATA初步教程"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">3 描述性统计分析 | STATA初步教程<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">主题使用：vuepress-theme-hope</div><div class="copyright">Copyright © 2022 WoziKing</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.44fd0688.js" defer></script>
  </body>
</html>
